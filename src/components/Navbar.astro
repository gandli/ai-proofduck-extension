---
const pathname = new URL(Astro.request.url).pathname;
// Remove trailing slash for consistent matching
const currentPath = pathname.replace(/\/$/, "");
const base = import.meta.env.BASE_URL;
---

<nav
  class="fixed top-6 left-1/2 -translate-x-1/2 z-[100] w-[calc(100%-3rem)] max-w-5xl bg-glass-bg backdrop-blur-md border border-glass-border px-6 py-3 rounded-2xl shadow-floating transition-all duration-300"
  style="view-transition-name: main-nav;"
>
  <div class="flex items-center justify-between">
    <a
      href="./"
      class="flex items-center gap-2.5 no-underline text-t1 font-bold text-base hover:opacity-80 transition-opacity"
    >
      <img
        src={base + "/icons/icon-128.png"}
        alt="Logo"
        class="w-7 h-7 rounded-lg shadow-sm"
        style="view-transition-name: duck-logo;"
      />
      <span data-i18n="logo_name" class="tracking-tight">AI Proofduck</span>
    </a>
    <div class="flex items-center gap-5">
      <div class="hidden md:flex items-center gap-5">
        <a
          href="./"
          class="text-xs font-semibold text-t2 no-underline hover:text-ac transition-colors"
          data-i18n="nav_home">Home</a
        >
        <a
          href="#features"
          class="text-xs font-semibold text-t2 no-underline hover:text-ac transition-colors"
          data-i18n="nav_features">Features</a
        >
        <a
          href="#engines"
          class="text-xs font-semibold text-t2 no-underline hover:text-ac transition-colors"
          data-i18n="nav_engines">Engines</a
        >
        <a
          href="#screenshots"
          class="text-xs font-semibold text-t2 no-underline hover:text-ac transition-colors"
          data-i18n="nav_screenshots">Screenshots</a
        >
        <a
          href="#changelog"
          class="text-xs font-semibold text-t2 no-underline hover:text-ac transition-colors"
          data-i18n="nav_changelog">Changelog</a
        >
        <a
          href="#privacy"
          class="text-xs font-semibold text-t2 no-underline hover:text-ac transition-colors"
          data-i18n="nav_privacy">Privacy</a
        >
      </div>

      <div class="h-4 w-px bg-black/10 hidden md:block"></div>

      <div class="flex items-center gap-1.5 p-1 bg-black/5 rounded-full">
        <button
          class="lang-btn px-2.5 py-1 rounded-full cursor-pointer text-[11px] font-bold transition-all text-t2 bg-transparent border-none hover:text-ac [&.active]:bg-white [&.active]:text-ac [&.active]:shadow-sm"
          data-lang="en">EN</button
        >
        <button
          class="lang-btn px-2.5 py-1 rounded-full cursor-pointer text-[11px] font-bold transition-all text-t2 bg-transparent border-none hover:text-ac [&.active]:bg-white [&.active]:text-ac [&.active]:shadow-sm"
          data-lang="zh">中文</button
        >
      </div>
    </div>
  </div>
</nav>
